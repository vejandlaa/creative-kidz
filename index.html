<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creative Kidz | Play Games</title>
    <style>
        :root {
            --bg-color: #f0f2f5;
            --primary-color: #2563eb;
            --text-color: #1e293b;
            --main-tile-size: 160px; /* Small, consistent home page tiles */
            --side-tile-size: 85px;  /* Tiny tiles for the sidebar */
        }

        body {
            font-family: -apple-system, system-ui, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* --- HEADER --- */
        header {
            padding: 10px 20px;
            background: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ddd;
            z-index: 100;
        }

        #main-content {
            flex: 1;
            display: flex;
            padding: 20px;
            overflow-y: auto;
            justify-content: center;
        }

        /* --- DASHBOARD VIEW (HOME) --- */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(var(--main-tile-size), 1fr));
            gap: 20px;
            width: 100%;
            max-width: 1200px;
        }

        /* --- PLAY MODE VIEW --- */
        #game-view {
            display: none;
            width: 100%;
            height: 100%;
            gap: 20px;
        }

        .iframe-container {
            flex: 4;
            background: #000;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* --- SIDEBAR TILES --- */
        .side-recommendations {
            flex: 0 0 100px; /* Fixed width sidebar */
            display: flex;
            flex-direction: column;
            gap: 12px;
            overflow-y: auto;
            align-items: center;
        }

        /* --- UNIVERSAL TILE STYLING --- */
        .tile {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.2s;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            aspect-ratio: 1 / 1; /* Forces square shape to prevent stretching */
        }

        .tile:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }

        /* Sidebar tile sizing */
        .side-recommendations .tile {
            width: var(--side-tile-size);
            height: var(--side-tile-size);
        }

        .media-container {
            position: relative;
            flex: 1;
            overflow: hidden;
            background: #eee;
        }

        .tile-img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Prevents vertical stretching seen in your image */
        }

        .hover-video {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover; opacity: 0; transition: opacity 0.3s;
        }
        .tile:hover .hover-video { opacity: 1; }

        .tile-title {
            padding: 8px 4px;
            font-size: 0.8rem;
            font-weight: 600;
            text-align: center;
            background: white;
            color: var(--text-color);
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

<header>
    <div style="font-size: 1.4rem; font-weight: bold; cursor: pointer;" onclick="showDashboard()">ðŸš€ Creative Kidz</div>
    <button id="home-btn" class="hidden" onclick="showDashboard()" style="cursor:pointer; padding: 6px 12px; border-radius: 8px; border: 1px solid #ccc; background: white;">Home</button>
</header>

<div id="main-content">
    <div id="grid-view" class="dashboard-grid"></div>

    <div id="game-view">
        <div class="iframe-container">
            <iframe id="game-loader" src=""></iframe>
        </div>
        <div class="side-recommendations" id="side-grid"></div>
    </div>
</div>

<script>
    const pages = [
        { id: 1, name: "Tic Tac Toe", file: "./games/tictactoe/ttt.html", img: "./images/tic-tac-toe.png" },
        { id: 2, name: "Squishmallow Arcade", file: "./games/squishmallow-arcade.html", img: "./images/claw-machine.png" },
        { id: 3, name: "Guess My Painting", file: "./games/guess-drawing.html", img: "./images/guess-my-painting.png" },
        { id: 4, name: "Snakes & Ladders", file: "./games/snake-and-ladder.html", img: "./images/snakes-and-ladders.png" }
    ];

    function createTile(page) {
        const tile = document.createElement('div');
        tile.className = 'tile';
        tile.innerHTML = `
                <div class="media-container">
                    <img src="${page.img}" class="tile-img" alt="${page.name}">
                    ${page.video ? `<video class="hover-video" loop muted playsinline><source src="${page.video}" type="video/mp4"></video>` : ''}
                </div>
                <div class="tile-title">${page.name}</div>
            `;

        tile.onclick = () => loadGame(page);
        tile.onmouseenter = () => { const v = tile.querySelector('video'); if(v) v.play(); };
        tile.onmouseleave = () => { const v = tile.querySelector('video'); if(v) { v.pause(); v.currentTime = 0; } };

        return tile;
    }

    function loadGame(page) {
        document.getElementById('grid-view').classList.add('hidden');
        document.getElementById('home-btn').classList.remove('hidden');
        document.getElementById('game-view').style.display = 'flex';

        // Fix: Directly set the file name from your project root
        document.getElementById('game-loader').src = page.file;

        const sideGrid = document.getElementById('side-grid');
        sideGrid.innerHTML = '';
        pages.filter(p => p.id !== page.id).forEach(p => {
            sideGrid.appendChild(createTile(p));
        });
    }

    function showDashboard() {
        document.getElementById('grid-view').classList.remove('hidden');
        document.getElementById('home-btn').classList.add('hidden');
        document.getElementById('game-view').style.display = 'none';
        document.getElementById('game-loader').src = '';
    }

    // Initialize grid
    const gridContainer = document.getElementById('grid-view');
    pages.forEach(p => gridContainer.appendChild(createTile(p)));
</script>
</body>
</html>